(()=>{"use strict";const e=window.React,t=window.wp.plugins,n=window.wp.editPost,o=window.wp.i18n,a=window.wp.element;(0,t.registerPlugin)("wpmd-host-metabox",{render(){const[t,l]=(0,a.useState)(wpmd_post?.host),[p,s]=(0,a.useState)(null),[r,d]=(0,a.useState)(wpmd_post.nonce),w=wpmd_post.hosts.map((t=>(0,e.createElement)("option",{value:t},t)));return(0,e.createElement)(n.PluginDocumentSettingPanel,{name:"wpmd-host-panel",title:(0,o.__)("Multi domain host","wpmd"),icon:null,open:!1},(0,e.createElement)("div",{id:"wpmd-host"},(0,e.createElement)("select",{onChange:e=>{l(e.target.value);const t=new FormData;t.append("action","wpmd-save-host"),t.append("post_ID",wpmd_post.ID),t.append(wpmd_post.field,e.target.value),t.append(r.name,r.value),p&&!p.signal.aborted&&p.abort();let n=new AbortController;fetch(ajaxurl,{method:"POST",body:t,signal:n.signal}).then((e=>{e.ok?e.json().then((e=>{e.status?e.nonce&&d(e.nonce):alert(e.error||"Unknown error")})):alert("Error")})),s(n)},value:t,style:{width:"100%"}},(0,e.createElement)("option",{value:""},(0,o.__)("Default Host","wpmd")),w)))}})})();